const rodbyBtn=document.getElementById("rodbyBtn"),gedserBtn=document.getElementById("gedserBtn"),rodbySect=document.getElementById("rodby"),gedserSect=document.getElementById("gedser"),progressBar=document.querySelector(".progress-bar"),toast=document.querySelector("#toast"),kbhPosition=document.getElementById("kbhPosition"),kbhSpeed=document.getElementById("kbhSpeed"),kbhDirection=document.getElementById("kbhDirection"),kbhTitle=document.getElementById("kbhTitle"),kbhUpdate=document.getElementById("kbh_update"),kbhKurs=document.getElementById("kbhKurs"),berlinPosition=document.getElementById("berlinPosition"),berlinSpeed=document.getElementById("berlinSpeed"),berlinDirection=document.getElementById("berlinDirection"),berlinTitle=document.getElementById("berlinTitle"),berlinUpdate=document.getElementById("berlin_update"),berlinKurs=document.getElementById("berlinKurs");rodbyBtn.addEventListener("click",(()=>{rodbyBtn.classList.contains("active")||(rodbyBtn.classList.add("active"),gedserBtn.classList.remove("active"),localStorage.setItem("harbour","rodby"),rodbySect.hidden=!1,gedserSect.hidden=!0)})),gedserBtn.addEventListener("click",(()=>{gedserBtn.classList.contains("active")||(rodbyBtn.classList.remove("active"),gedserBtn.classList.add("active"),localStorage.setItem("harbour","gedser"),rodbySect.hidden=!0,gedserSect.hidden=!1)}));let i=100;const increment=600;function startTheClock(){const e=setInterval((function(){i--,i>0?progressBar.style.width=i+"%":(clearInterval(e),setTimeout("location.reload()",5e3))}),600)}function makeSound(){new Howl({src:["audio.mp3"],volume:.8}).play()}function notifyMe(){if("Notification"in window)if("granted"===Notification.permission)new Notification("Færgen er i havn!");else"denied"!==Notification.permission&&Notification.requestPermission().then((function(e){if("granted"===e)new Notification("Færgen er i havn!")}));else alert("Færgen er i havn!")}$.get(urlCopenhagen,(function(e){const t=$(e).find("tr:nth-child(10) td.v3")[0].innerText,n=$(e).find("tr:nth-child(9) td.v3")[0].innerText,i=Number(t.substring(0,7)),r=(Number(t.substring(11,18)),Number(n.substring(0,5))),o=Number(n.substring(8,13))*knotsToKm;let d="",s=0;r>270||r<45?(d="Nord",s=(i-latRostock)/(latGedser-latRostock)):(d="Syd",s=(latGedser-i)/(latGedser-latRostock)),s=(100*s).toPrecision(2),kbhPosition.innerText=t,kbhDirection.innerText=d,kbhKurs.innerText=r,kbhSpeed.innerText=o.toPrecision(2)+"km/t";const l=new Date;kbhUpdate.innerText=l.toLocaleTimeString(),"Syd"===d?kbhTitle.innerText=`København er nået ${s}% til Rostock`:"Nord"===d&&i<latCutoff?kbhTitle.innerText=`København er nået ${s}% til Gedser`:i>latCutoff&&"Nord"===d&&(kbhTitle.innerText="Færgen er snart i havn!!",kbhTitle.style.color="red",window.focus(),notifyMe(),alert("Færgen er snart i havn!"),makeSound()),startTheClock()})),$.get(urlBerlin,(function(e){const t=$(e).find("tr:nth-child(10) td.v3")[0].innerText,n=$(e).find("tr:nth-child(9) td.v3")[0].innerText,i=Number(t.substring(0,7)),r=(Number(t.substring(11,18)),Number(n.substring(0,5))),o=Number(n.substring(8,13))*knotsToKm;let d="",s=0;r>270||r<45?(d="Nord",s=(i-latRostock)/(latGedser-latRostock)):(d="Syd",s=(latGedser-i)/(latGedser-latRostock)),s=(100*s).toPrecision(2),berlinPosition.innerText=t,berlinDirection.innerText=d,berlinSpeed.innerText=o.toPrecision(2)+"km/t",berlinKurs.innerText=r;const l=new Date;berlinUpdate.innerText=l.toLocaleTimeString(),"Syd"===d?berlinTitle.innerText=`Berlin er nået ${s}% til Rostock`:"Nord"===d&&i<latCutoff?berlinTitle.innerText=`Berlin er nået ${s}% til Gedser`:i>latCutoff&&"Nord"===d&&(berlinTitle.innerText="Færgen er snart i havn!!",berlinTitle.style.color="red",window.focus(),notifyMe(),alert("Færgen er snart i havn!"),makeSound()),startTheClock()}));